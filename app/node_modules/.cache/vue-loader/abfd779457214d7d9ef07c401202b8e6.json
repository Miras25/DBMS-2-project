{"remainingRequest":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Downloads\\project\\app\\src\\views\\medicines\\MedicineView.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\Users\\User\\Downloads\\project\\app\\src\\views\\medicines\\MedicineView.vue","mtime":1607033948000},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619785757533},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1619785757509},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\ts-loader\\index.js","mtime":1619785330507},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619785757533},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1619785764623}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IHsgYXBpIH0gZnJvbSAiQC9hcGkiOwppbXBvcnQgeyBNZWRpY2luZSwgUGhhcm1hY3kgfSBmcm9tICJAL0B0eXBlcyI7CmltcG9ydCBHaXNNYXAgZnJvbSAiQC9jb21wb25lbnRzL0dpc01hcC52dWUiOwoKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czogeyBHaXNNYXAgfSwKfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVkaWNpbmVWaWV3IGV4dGVuZHMgVnVlIHsKICBtZWRpY2luZTogTWVkaWNpbmUgPSBudWxsOwogIGFuYWxvZ3M6IE1lZGljaW5lW10gPSBbXTsKICBzdG9yZXM6IFBoYXJtYWN5W10gPSBudWxsOwogIGNvdW50ID0gMDsKICBkaWFsb2cgPSBmYWxzZTsKCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMuJHJvdXRlLnBhcmFtczsKICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLmdldCgiL21lZGljaW5lcy8iICsgaWQpOwogICAgaWYgKCFkYXRhLm1lZGljaW5lKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZXIucHVzaCgiL21lZGljaW5lcyIpOwogICAgfQogICAgY29uc3QgeyBtZWRpY2luZSwgYW5hbG9ncyB9ID0gZGF0YTsKICAgIHRoaXMubWVkaWNpbmUgPSBtZWRpY2luZTsKICAgIHRoaXMuYW5hbG9ncyA9IGFuYWxvZ3M7CgogICAgY29uc3QgewogICAgICBkYXRhOiB7IHJlc3VsdCwgY291bnQgfSwKICAgIH0gPSBhd2FpdCBhcGkuZ2V0KCIvc3RvcmVzL2J5LWRydWctaWQvIiArIGlkKTsKICAgIHRoaXMuc3RvcmVzID0gcmVzdWx0OwogICAgdGhpcy5jb3VudCA9IGNvdW50OwogIH0KCiAgcHVibGljIHBhcnNlU3RhdHVzKHN0YXR1czogc3RyaW5nKSB7CiAgICBpZiAoc3RhdHVzID09ICJyZWNpcGUiKSB7CiAgICAgIHJldHVybiAi0J/QviDRgNC10YbQtdC/0YLRgyI7CiAgICB9CiAgICByZXR1cm4gItCR0LXQtyDRgNC10YbQtdC/0YLQsCI7CiAgfQoKICBwdWJsaWMgcm91dGVUbyhpZDogbnVtYmVyKSB7CiAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICJtZWRpY2luZS12aWV3IiwKICAgICAgcGFyYW1zOiB7CiAgICAgICAgaWQ6IGlkICsgIiIsCiAgICAgIH0sCiAgICB9KTsKICB9Cn0K"},{"version":3,"sources":["MedicineView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MedicineView.vue","sourceRoot":"src/views/medicines","sourcesContent":["<template>\n  <div id=\"medicine-view\" class=\"d-flex justify-space-between\" v-if=\"medicine\">\n    <div class=\"info-wrapper pl-16 pt-15 mr-6\">\n      <h1 class=\"medicine-title\">\n        {{ medicine.TITLE }}\n      </h1>\n\n      <v-card outlined elevation=\"0\" class=\"mt-8\">\n        <v-card-subtitle class=\"d-flex justify-space-between\">\n          <span class=\"primary--text\">{{ parseStatus(medicine.STATUS) }}</span>\n          <span v-if=\"!medicine.AVAILABLE\">\n            В данный момент нет в наличии\n          </span>\n        </v-card-subtitle>\n        <v-card-text v-if=\"analogs.length\" class=\"px-4 pb-4\">\n          <v-btn color=\"primary\" small @click=\"dialog = true\">\n            Аналоги ({{ analogs.length }})\n          </v-btn>\n        </v-card-text>\n      </v-card>\n      <p class=\"my-8\">Найдено {{ count }} аптек</p>\n      <v-card\n        v-for=\"store in stores\"\n        :key=\"store.ID + Math.random()\"\n        class=\"mb-4\"\n        outlined\n        elevation=\"0\"\n      >\n        <v-card-title>{{ store.TITLE }}</v-card-title>\n        <v-card-subtitle>{{ store.ADDRESS }}</v-card-subtitle>\n        <v-card-text class=\"d-flex justify-space-between\">\n          <span>{{ store.PHONES }}</span>\n          <v-chip v-if=\"store.PRICE\" color=\"secondary\">{{\n            store.PRICE\n          }}</v-chip>\n          <span v-else>Уточните у продавца</span>\n        </v-card-text>\n      </v-card>\n    </div>\n    <div class=\"spacer\"></div>\n    <gis-map v-if=\"stores\" class=\"map\" :stores=\"stores\"></gis-map>\n    <v-dialog v-model=\"dialog\" width=\"500\">\n      <v-card>\n        <v-card-title>Аналоги</v-card-title>\n        <v-card-text>\n          <v-card\n            v-for=\"item in analogs\"\n            :key=\"item.ID + Math.random()\"\n            class=\"mb-5\"\n          >\n            <v-card-title>{{ item.TITLE }}</v-card-title>\n            <v-card-subtitle class=\"primary--text\">{{\n              parseStatus(item.STATUS)\n            }}</v-card-subtitle>\n            <v-card-text class=\"d-flex justify-space-between\">\n              <template v-if=\"item.AVAILABLE\">\n                <div class=\"wrapper d-flex align-center\">\n                  <template v-if=\"item.PRICE\">\n                    <span class=\"mr-2\">Цена:</span>\n                    <v-chip color=\"secondary\">от {{ item.PRICE }}</v-chip>\n                  </template>\n                </div>\n                <v-btn @click=\"routeTo(item.ID)\" color=\"#171E54\" text>\n                  Где купить\n                </v-btn>\n              </template>\n              <template v-else>\n                В данный момент нет в наличии\n              </template>\n            </v-card-text>\n          </v-card>\n        </v-card-text>\n        <v-card-actions class=\"px-4 pb-4\">\n          <v-btn text @click=\"dialog = false\">Закрыть</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { api } from \"@/api\";\nimport { Medicine, Pharmacy } from \"@/@types\";\nimport GisMap from \"@/components/GisMap.vue\";\n\n@Component({\n  components: { GisMap },\n})\nexport default class MedicineView extends Vue {\n  medicine: Medicine = null;\n  analogs: Medicine[] = [];\n  stores: Pharmacy[] = null;\n  count = 0;\n  dialog = false;\n\n  async created() {\n    const { id } = this.$route.params;\n    const { data } = await api.get(\"/medicines/\" + id);\n    if (!data.medicine) {\n      return this.$router.push(\"/medicines\");\n    }\n    const { medicine, analogs } = data;\n    this.medicine = medicine;\n    this.analogs = analogs;\n\n    const {\n      data: { result, count },\n    } = await api.get(\"/stores/by-drug-id/\" + id);\n    this.stores = result;\n    this.count = count;\n  }\n\n  public parseStatus(status: string) {\n    if (status == \"recipe\") {\n      return \"По рецепту\";\n    }\n    return \"Без рецепта\";\n  }\n\n  public routeTo(id: number) {\n    this.$router.push({\n      name: \"medicine-view\",\n      params: {\n        id: id + \"\",\n      },\n    });\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/_variables.scss\";\n\n.info-wrapper {\n  width: 550px;\n}\n.medicine-title {\n  font-size: 2.2rem;\n  font-weight: 600;\n}\n.map {\n  position: fixed;\n  right: 0;\n  top: 64px;\n  width: calc(100vw - 550px - 60px);\n  height: calc(100vh - 64px);\n}\n</style>\n"]}]}