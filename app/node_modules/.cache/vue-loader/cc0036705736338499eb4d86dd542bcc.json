{"remainingRequest":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Downloads\\project\\app\\src\\views\\stores\\Search.vue?vue&type=style&index=0&id=9323feca&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\User\\Downloads\\project\\app\\src\\views\\stores\\Search.vue","mtime":1607058588000},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\css-loader\\dist\\cjs.js","mtime":1619785764282},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1619785764623},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":1619785764560},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1619785769875},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619785757533},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1619785764623}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1hcCB7CiAgcG9zaXRpb246IGZpeGVkOwogIHJpZ2h0OiAwOwogIHRvcDogNjRweDsKICB3aWR0aDogY2FsYygxMDB2dyAtIDU1MHB4IC0gNjBweCAtIDU4cHgpOwogIGhlaWdodDogY2FsYygxMDB2aCAtIDY0cHgpOwogIHotaW5kZXg6IDE7Cn0K"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views/stores","sourcesContent":["<template>\n  <div class=\"pb-10\">\n    <p class=\"subtitle\">Найдено {{ count }} аптек</p>\n    <v-card\n      v-for=\"store in list\"\n      :key=\"store.ID + Math.random()\"\n      class=\"mb-4\"\n      outlined\n      elevation=\"0\"\n    >\n      <v-card-title>{{ store.TITLE }}</v-card-title>\n      <v-card-subtitle>{{ store.ADDRESS }}</v-card-subtitle>\n      <v-card-text class=\"d-flex justify-space-between\">\n        <span>{{ store.PHONES }}</span>\n      </v-card-text>\n    </v-card>\n    <v-btn\n      large\n      v-if=\"!isEnd\"\n      color=\"primary\"\n      width=\"100%\"\n      @click=\"fetch(list.length)\"\n    >\n      Загрузить еще\n    </v-btn>\n    <gis-map ref=\"map\" class=\"map\" :stores=\"list\"></gis-map>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Pharmacy } from \"@/@types\";\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { api } from \"@/api\";\nimport GisMap from \"@/components/GisMap.vue\";\n\n@Component({\n  components: { GisMap },\n})\nexport default class StoresSearchView extends Vue {\n  list: Pharmacy[] = [];\n  count = 0;\n  isEnd = false;\n\n  $refs: {\n    map: GisMap;\n  };\n\n  public async fetch(offset: number) {\n    const { query } = this.$route.query;\n    const {\n      data: { result, count },\n    } = await api.get(`/stores?query=${query}&offset=${offset}`);\n    if (result.length == 0) {\n      this.isEnd = true;\n      return;\n    }\n    this.list.push(...result);\n    this.count = count;\n\n    this.$refs.map.updateMarkers();\n  }\n\n  async created() {\n    await this.fetch(0);\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.map {\n  position: fixed;\n  right: 0;\n  top: 64px;\n  width: calc(100vw - 550px - 60px - 58px);\n  height: calc(100vh - 64px);\n  z-index: 1;\n}\n</style>\n"]}]}