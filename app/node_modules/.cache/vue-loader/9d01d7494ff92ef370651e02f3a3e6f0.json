{"remainingRequest":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Downloads\\project\\app\\src\\views\\Login.vue?vue&type=style&index=0&id=26084dc2&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\User\\Downloads\\project\\app\\src\\views\\Login.vue","mtime":1607041981000},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\css-loader\\dist\\cjs.js","mtime":1619785764282},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1619785764623},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":1619785764560},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1619785769875},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619785757533},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1619785764623}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaW5mby13cmFwcGVyIHsKICBtYXgtd2lkdGg6IDU1MHB4OwogIGZsZXg6IDE7Cn0KLmxvZ2luLXRpdGxlIHsKICBmb250LXNpemU6IDIuMnJlbTsKICBmb250LXdlaWdodDogNjAwOwp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"login-view\" class=\"px-16 pt-15 d-flex justify-space-between\">\n    <div class=\"info-wrapper\">\n      <h1 class=\"login-title\">\n        Войдите чтобы подать объявление\n      </h1>\n\n      <p class=\"my-8\">\n        Если у вас нету аккаунта, <br />\n        можете\n        <router-link to=\"/register\" class=\"primary--text\">\n          Зарегистрироваться здесь\n        </router-link>\n      </p>\n      <p class=\"my-4 red--text\" v-if=\"error\">\n        {{ error }}\n      </p>\n      <v-form ref=\"form\">\n        <v-text-field\n          v-model=\"phone\"\n          v-mask=\"'+7 (###) ### ## ##'\"\n          label=\"Номер телефона\"\n          outlined\n          :rules=\"[rules.required, rules.phone]\"\n        ></v-text-field>\n        <v-text-field\n          v-model=\"password\"\n          outlined\n          label=\"Пароль\"\n          :type=\"show ? 'text' : 'password'\"\n          :append-icon=\"show ? 'mdi-eye' : 'mdi-eye-off'\"\n          @click:append=\"show = !show\"\n          :rules=\"[rules.required, rules.min]\"\n        ></v-text-field>\n        <v-checkbox\n          class=\"mt-0\"\n          v-model=\"stay\"\n          label=\"Запомнить меня\"\n        ></v-checkbox>\n        <v-btn color=\"primary\" large width=\"200\" @click=\"login\">Войти</v-btn>\n      </v-form>\n    </div>\n    <div class=\"illustration-wrapper\">\n      <v-img\n        alt=\"Login page illustration\"\n        contain\n        src=\"@/assets/login-illustration.svg\"\n        transition=\"scale-transition\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { VForm } from \"@/@types\";\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { api } from \"@/api\";\nimport { setToken } from \"@/utils\";\n\n@Component\nexport default class LoginView extends Vue {\n  show = false;\n  phone = \"\";\n  password = \"\";\n  stay = false;\n  error = \"\";\n\n  rules = {\n    required: (value) => !!value || \"Обязательное поле\",\n    min: (v) => v.length >= 8 || \"Минимум 8 символов\",\n    phone: (v) =>\n      /^(\\+7) \\([0-9]{3}\\) ([0-9]{3}) ([0-9]{2}) ([0-9]{2})$/.test(v) ||\n      \"Правильный номер\",\n  };\n\n  $refs: {\n    form: VForm;\n  };\n\n  public login() {\n    if (!this.$refs.form.validate()) return;\n\n    api\n      .post(\"/users/authenticate\", {\n        phone: this.phone,\n        password: this.password,\n      })\n      .then(({ data }) => {\n        setToken(data.token, this.stay);\n        this.$store.commit(\"setUser\", data.user);\n        this.$store.commit(\"setLoggedIn\", true);\n        this.$router.push(\"/\");\n      })\n      .catch(({ response }) => {\n        const { message } = response.data;\n        if (message == \"User not found\") this.error = \"Пользователь не найден\";\n        if (message == \"Passwords do not match\")\n          this.error = \"Пароль не верный\";\n      });\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.info-wrapper {\n  max-width: 550px;\n  flex: 1;\n}\n.login-title {\n  font-size: 2.2rem;\n  font-weight: 600;\n}\n</style>\n"]}]}