{"remainingRequest":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Downloads\\project\\app\\src\\views\\Login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\Users\\User\\Downloads\\project\\app\\src\\views\\Login.vue","mtime":1607041981000},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619785757533},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1619785757509},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\ts-loader\\index.js","mtime":1619785330507},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619785757533},{"path":"C:\\Users\\User\\Downloads\\project\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1619785764623}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgVkZvcm0gfSBmcm9tICJAL0B0eXBlcyI7CmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCB7IGFwaSB9IGZyb20gIkAvYXBpIjsKaW1wb3J0IHsgc2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzIjsKCkBDb21wb25lbnQKZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naW5WaWV3IGV4dGVuZHMgVnVlIHsKICBzaG93ID0gZmFsc2U7CiAgcGhvbmUgPSAiIjsKICBwYXNzd29yZCA9ICIiOwogIHN0YXkgPSBmYWxzZTsKICBlcnJvciA9ICIiOwoKICBydWxlcyA9IHsKICAgIHJlcXVpcmVkOiAodmFsdWUpID0+ICEhdmFsdWUgfHwgItCe0LHRj9C30LDRgtC10LvRjNC90L7QtSDQv9C+0LvQtSIsCiAgICBtaW46ICh2KSA9PiB2Lmxlbmd0aCA+PSA4IHx8ICLQnNC40L3QuNC80YPQvCA4INGB0LjQvNCy0L7Qu9C+0LIiLAogICAgcGhvbmU6ICh2KSA9PgogICAgICAvXihcKzcpIFwoWzAtOV17M31cKSAoWzAtOV17M30pIChbMC05XXsyfSkgKFswLTldezJ9KSQvLnRlc3QodikgfHwKICAgICAgItCf0YDQsNCy0LjQu9GM0L3Ri9C5INC90L7QvNC10YAiLAogIH07CgogICRyZWZzOiB7CiAgICBmb3JtOiBWRm9ybTsKICB9OwoKICBwdWJsaWMgbG9naW4oKSB7CiAgICBpZiAoIXRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSByZXR1cm47CgogICAgYXBpCiAgICAgIC5wb3N0KCIvdXNlcnMvYXV0aGVudGljYXRlIiwgewogICAgICAgIHBob25lOiB0aGlzLnBob25lLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICB9KQogICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICBzZXRUb2tlbihkYXRhLnRva2VuLCB0aGlzLnN0YXkpOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0VXNlciIsIGRhdGEudXNlcik7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2dnZWRJbiIsIHRydWUpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoeyByZXNwb25zZSB9KSA9PiB7CiAgICAgICAgY29uc3QgeyBtZXNzYWdlIH0gPSByZXNwb25zZS5kYXRhOwogICAgICAgIGlmIChtZXNzYWdlID09ICJVc2VyIG5vdCBmb3VuZCIpIHRoaXMuZXJyb3IgPSAi0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC90LUg0L3QsNC50LTQtdC9IjsKICAgICAgICBpZiAobWVzc2FnZSA9PSAiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaCIpCiAgICAgICAgICB0aGlzLmVycm9yID0gItCf0LDRgNC+0LvRjCDQvdC1INCy0LXRgNC90YvQuSI7CiAgICAgIH0pOwogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"login-view\" class=\"px-16 pt-15 d-flex justify-space-between\">\n    <div class=\"info-wrapper\">\n      <h1 class=\"login-title\">\n        Войдите чтобы подать объявление\n      </h1>\n\n      <p class=\"my-8\">\n        Если у вас нету аккаунта, <br />\n        можете\n        <router-link to=\"/register\" class=\"primary--text\">\n          Зарегистрироваться здесь\n        </router-link>\n      </p>\n      <p class=\"my-4 red--text\" v-if=\"error\">\n        {{ error }}\n      </p>\n      <v-form ref=\"form\">\n        <v-text-field\n          v-model=\"phone\"\n          v-mask=\"'+7 (###) ### ## ##'\"\n          label=\"Номер телефона\"\n          outlined\n          :rules=\"[rules.required, rules.phone]\"\n        ></v-text-field>\n        <v-text-field\n          v-model=\"password\"\n          outlined\n          label=\"Пароль\"\n          :type=\"show ? 'text' : 'password'\"\n          :append-icon=\"show ? 'mdi-eye' : 'mdi-eye-off'\"\n          @click:append=\"show = !show\"\n          :rules=\"[rules.required, rules.min]\"\n        ></v-text-field>\n        <v-checkbox\n          class=\"mt-0\"\n          v-model=\"stay\"\n          label=\"Запомнить меня\"\n        ></v-checkbox>\n        <v-btn color=\"primary\" large width=\"200\" @click=\"login\">Войти</v-btn>\n      </v-form>\n    </div>\n    <div class=\"illustration-wrapper\">\n      <v-img\n        alt=\"Login page illustration\"\n        contain\n        src=\"@/assets/login-illustration.svg\"\n        transition=\"scale-transition\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { VForm } from \"@/@types\";\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { api } from \"@/api\";\nimport { setToken } from \"@/utils\";\n\n@Component\nexport default class LoginView extends Vue {\n  show = false;\n  phone = \"\";\n  password = \"\";\n  stay = false;\n  error = \"\";\n\n  rules = {\n    required: (value) => !!value || \"Обязательное поле\",\n    min: (v) => v.length >= 8 || \"Минимум 8 символов\",\n    phone: (v) =>\n      /^(\\+7) \\([0-9]{3}\\) ([0-9]{3}) ([0-9]{2}) ([0-9]{2})$/.test(v) ||\n      \"Правильный номер\",\n  };\n\n  $refs: {\n    form: VForm;\n  };\n\n  public login() {\n    if (!this.$refs.form.validate()) return;\n\n    api\n      .post(\"/users/authenticate\", {\n        phone: this.phone,\n        password: this.password,\n      })\n      .then(({ data }) => {\n        setToken(data.token, this.stay);\n        this.$store.commit(\"setUser\", data.user);\n        this.$store.commit(\"setLoggedIn\", true);\n        this.$router.push(\"/\");\n      })\n      .catch(({ response }) => {\n        const { message } = response.data;\n        if (message == \"User not found\") this.error = \"Пользователь не найден\";\n        if (message == \"Passwords do not match\")\n          this.error = \"Пароль не верный\";\n      });\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.info-wrapper {\n  max-width: 550px;\n  flex: 1;\n}\n.login-title {\n  font-size: 2.2rem;\n  font-weight: 600;\n}\n</style>\n"]}]}